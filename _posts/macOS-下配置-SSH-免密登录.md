---
title: macOS 下配置 SSH 免密登录
mathjax: false
date: 2020-12-31 14:49:31
updated: 2020-12-31 14:49:31
tags: [macOS, SSH]
categories: [技术杂谈]
toc: true
---


## 1. 检查是否已存在公私钥对
打开终端，输入 `cd ~/.ssh`，然后输入 `ls`，看看有哪些公私钥文件。
在输出的文件中，带有 `.pub` 后缀的是公钥，不带的是私钥。
* 如果系统中已有公私钥对，那么可以什么都不做。
* 如果系统中没有公私钥对，输入 `ssh-keygen`，根据交互，创建一个新的公私钥对，创建完后可通过 `ls` 命令查看。
<!--more-->
## 2. 上传公钥到服务器
将公钥文件从本地上传到服务器指定目录。
在终端中输入 `ssh-copy-id -i [公钥文件] [user]@[host]`，其中公钥文件就是前面 `ls` 看到的，带有 `.pub` 后缀的文件，`user` 是服务器的用户名，`host` 是服务器 IP 地址。这里会要求输入密码。
例如，我输入的是 `ssh-copy-id -i id_rsa.pub root@49.232.2.120`。

现在，通过 ssh 连接我们的服务器，就不再需要密码啦！


## 3. ssh-add （不一定需要）

如果通过上面的两个步骤，已经实现了免密，则忽略此步骤。
如果没有实现免密，输入 `ssh-add -K [你的私钥文件]`，私钥文件就是后缀没有 `.pub` 的那个。
例如，`ssh-add -K id_rsa`。
-
到此，macOS 下配置 SSH 免密登录的全部工作完成，撒花！